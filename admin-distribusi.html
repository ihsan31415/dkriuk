<!DOCTYPE html>
<html class="light" lang="id">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>D'Kriuk - Distribusi Stok</title>
    
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;900&display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" rel="stylesheet"/>
    
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#eb6f0a", // Oranye D'Kriuk
                        "background-light": "#f8f7f5",
                        "background-dark": "#23170f",
                    },
                    fontFamily: {
                        "display": ["Inter", "sans-serif"]
                    },
                },
            },
        }
    </script>
    <style>
        .material-symbols-outlined {
            font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
        }
        /* Hapus panah up/down di input number */
        input[type=number]::-webkit-inner-spin-button, 
        input[type=number]::-webkit-outer-spin-button { 
            -webkit-appearance: none; 
            margin: 0; 
        }
    </style>
</head>

<body class="bg-gray-50 text-gray-800 font-display">

<div class="relative flex h-auto min-h-screen w-full flex-col overflow-x-hidden">
    <div class="flex h-full grow flex-col">
        <div class="flex flex-1 justify-center py-5 sm:py-8 lg:py-12 px-4 sm:px-6 lg:px-8">
            <div class="flex flex-col w-full max-w-5xl flex-1">
                
                <div class="flex items-center gap-4 px-1 py-3 border-b border-gray-200 mb-6">
                    <a href="admin-dashboard.html" class="p-2 text-gray-500 hover:text-primary hover:bg-orange-50 rounded-full transition-colors">
                        <span class="material-symbols-outlined text-2xl">arrow_back</span>
                    </a>
                    <div>
                        <h1 class="text-gray-900 text-2xl sm:text-3xl font-bold leading-tight">Distribusi Stok Baru</h1>
                        <p class="text-sm text-gray-500">Kirim stok dari Hub Pusat ke Outlet Satelit</p>
                    </div>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-5 gap-8">
                    
                    <div class="lg:col-span-2 flex flex-col gap-6">
                        <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                            <h3 class="text-gray-900 text-lg font-bold mb-4 flex items-center gap-2">
                                <span class="material-symbols-outlined text-primary">local_shipping</span>
                                Detail Pengiriman
                            </h3>
                            
                            <div class="flex flex-col gap-4">
                                <label class="flex flex-col w-full">
                                    <p class="text-gray-700 text-sm font-medium pb-2">Asal Stok (Source)</p>
                                    <select class="form-select w-full rounded-lg border-gray-300 bg-gray-50 text-gray-500 h-12">
                                        <option selected value="hub-utama">Hub Pusat (Dapur Utama)</option>
                                    </select>
                                </label>

                                <label class="flex flex-col w-full">
                                    <p class="text-gray-700 text-sm font-medium pb-2">Outlet Tujuan</p>
                                    <select id="outletSelect" class="form-select w-full rounded-lg border-gray-300 focus:border-primary focus:ring-primary h-12">
                                        <option disabled selected value="">-- Pilih Outlet --</option>
                                        <option value="sekaran">Cabang UNNES Sekaran (Kritis)</option>
                                        <option value="banaran">Cabang Banaran</option>
                                        <option value="sampangan">Cabang Sampangan</option>
                                    </select>
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="lg:col-span-3 flex flex-col gap-6">
                        <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                            <h3 class="text-gray-900 text-lg font-bold mb-4 flex items-center gap-2">
                                <span class="material-symbols-outlined text-primary">inventory_2</span>
                                Item yang Dikirim
                            </h3>
                            
                            <div class="flex flex-col gap-4">
                                <div class="flex items-center justify-between gap-4 p-4 rounded-lg bg-gray-50 border border-gray-100 hover:border-orange-200 transition-colors">
                                    <div class="flex items-center gap-3">
                                        <div class="w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center text-primary font-bold">PA</div>
                                        <span class="text-gray-800 font-medium">Ayam Paha Atas</span>
                                    </div>
                                    <input class="qty-input form-input w-24 rounded-md border-gray-300 text-center text-lg font-bold focus:border-primary focus:ring-primary" min="0" type="number" value="0"/>
                                </div>

                                <div class="flex items-center justify-between gap-4 p-4 rounded-lg bg-gray-50 border border-gray-100 hover:border-orange-200 transition-colors">
                                    <div class="flex items-center gap-3">
                                        <div class="w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center text-primary font-bold">DA</div>
                                        <span class="text-gray-800 font-medium">Ayam Dada</span>
                                    </div>
                                    <input class="qty-input form-input w-24 rounded-md border-gray-300 text-center text-lg font-bold focus:border-primary focus:ring-primary" min="0" type="number" value="0"/>
                                </div>

                                <div class="flex items-center justify-between gap-4 p-4 rounded-lg bg-gray-50 border border-gray-100 hover:border-orange-200 transition-colors">
                                    <div class="flex items-center gap-3">
                                        <div class="w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center text-primary font-bold">SA</div>
                                        <span class="text-gray-800 font-medium">Ayam Sayap</span>
                                    </div>
                                    <input class="qty-input form-input w-24 rounded-md border-gray-300 text-center text-lg font-bold focus:border-primary focus:ring-primary" min="0" type="number" value="0"/>
                                </div>
                            </div>
                        </div>

                        <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                            <div class="flex items-center justify-between mb-6">
                                <span class="text-gray-600 font-medium text-lg">Total Item</span>
                                <span id="totalDisplay" class="text-primary font-black text-4xl">0</span>
                            </div>
                            
                            <button onclick="prosesKirim()" class="w-full bg-gray-900 text-white font-bold py-4 px-6 rounded-xl shadow-lg hover:bg-primary hover:shadow-orange-500/30 transform hover:-translate-y-1 transition-all duration-200 flex justify-center items-center gap-2">
                                <span class="material-symbols-outlined">send</span>
                                Konfirmasi & Kirim Stok
                            </button>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>

<script>
    // 1. Auto-Calculate Total Item
    const inputs = document.querySelectorAll('.qty-input');
    const totalDisplay = document.getElementById('totalDisplay');

    inputs.forEach(input => {
        input.addEventListener('input', updateSum);
    });

    function updateSum() {
        let sum = 0;
        inputs.forEach(input => {
            let val = parseInt(input.value) || 0; // Jika kosong dianggap 0
            sum += val;
        });
        totalDisplay.innerText = sum;
    }

    // 2. Fungsi Tombol Kirim (SweetAlert)
    function prosesKirim() {
        // Cek apakah outlet sudah dipilih
        const outlet = document.getElementById('outletSelect').value;
        const total = totalDisplay.innerText;

        if (outlet === "") {
            Swal.fire({
                icon: 'error',
                title: 'Oops...',
                text: 'Silakan pilih Outlet Tujuan terlebih dahulu!',
                confirmButtonColor: '#eb6f0a'
            });
            return;
        }

        if (total == 0) {
             Swal.fire({
                icon: 'warning',
                title: 'Stok Kosong',
                text: 'Masukkan jumlah ayam yang ingin dikirim.',
                confirmButtonColor: '#eb6f0a'
            });
            return;
        }

        // Simulasi Sukses
        Swal.fire({
            title: 'Sedang Memproses...',
            timer: 1000,
            didOpen: () => {
                Swal.showLoading()
            }
        }).then(() => {
            Swal.fire({
                icon: 'success',
                title: 'Stok Terkirim!',
                text: `Berhasil mengirim ${total} item ke Outlet.`,
                confirmButtonColor: '#eb6f0a',
                confirmButtonText: 'Kembali ke Dashboard'
            }).then((result) => {
                if (result.isConfirmed) {
                    window.location.href = 'admin-dashboard.html';
                }
            });
        });
    }
</script>

</body>
</html>